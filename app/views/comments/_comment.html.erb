<% if comment.parent_id.blank? %>
  <div class="comment">
<% else %>
  <div class="comment response">
<% end %>

<!-- <ul class="comment">
  <li class="comment-list"> -->

  <% if (current_user == comment.user) || (current_user.try(:admin?)) %>
    <h4>
      <%= link_to "×", comment_path(comment), :method => :delete, :remote => true, data: { confirm: "Are you sure you want to delete this comment?", disable_with: "×" }, class: "close" %>
    </h4>
  <% end %>

  <small>
    <%= "Posted #{time_ago_in_words(comment.updated_at)} ago by" %>
    <% if comment.user.admin? %>
      <span id="admin">
    <% else %>
      <span id="name">
    <% end %>
      <%= "#{comment.user.name}" %>
    </span>
  </small>
  <p><%= h(comment.body).gsub(/\n/, '<br/>').html_safe %></p>

  <div class="reply">
    <p class="reply-link"><%= link_to "Reply", '#', remote: true %></p>

    <div class="comment-form" style="display:none">
      <% puts @new_comment.inspect %>
      <% if false %>
        <%= render partial: 'comments/form', locals: { comment: @new_comment, parent_id: comment.id } %>
      <% end %>
    </div>
  </div>

  <% if comment.has_children? %>
    <%= render(:partial => 'comments/comment', collection: comment.children, as: :comment) %>

    <% if false %>
      <%= render(:partial => 'comments/comment', collection: comment.children, as: :comment,
          locals: { new_comment: new_comment }) %>
    <% end %>
  <% end %>

  <!-- </li>
</ul> -->
</div>